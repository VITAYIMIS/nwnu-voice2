<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>è¥¿åŒ—å¸ˆèŒƒå¤§å­¦æ ¡å­¦ç”Ÿä¼š | å€¾å¬å»ºè¨€ç•™è¨€æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --nwnu-blue: #003d74; --nwnu-gold: #b8976d; }
        body { background-color: #f6f8fa; font-family: "PingFang SC", "Microsoft YaHei", sans-serif; color: #333; }
        
        /* å®˜æ–¹æ”¿åŠ¡è´¨æ„Ÿå¯¼èˆª */
        .gov-header {
            background: white;
            border-bottom: 3px solid var(--nwnu-blue);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        /* æœç´¢æ¡†ï¼šå†…æ•›åº„é‡ */
        .gov-search {
            background: #fff;
            border: 1px solid #d1d9e0;
            transition: all 0.3s ease;
        }
        .gov-search:focus {
            border-color: var(--nwnu-blue);
            box-shadow: 0 0 0 3px rgba(0,61,116,0.1);
        }

        /* åˆ—è¡¨é¡¹å¡ç‰‡ï¼šè§„æ•´å¯¹ç§° */
        .gov-card {
            background: white;
            border-left: 4px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        .gov-card:hover {
            border-left-color: var(--nwnu-blue);
            transform: translateX(2px);
            background: #fafbfd;
        }

        /* çŠ¶æ€æ ‡ç­¾ */
        .status-badge {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 2px;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        /* åº•éƒ¨å›ºå®šåŒº */
        .gov-footer {
            background: linear-gradient(to top, #f6f8fa 70%, rgba(246,248,250,0));
        }

        /* å­—ä½“æŠ—é”¯é½¿ä¼˜åŒ– */
        .antialiased { -webkit-font-smoothing: antialiased; }
    </style>
</head>
<body class="pb-32 antialiased">

    <header class="gov-header sticky top-0 z-50">
        <div class="max-w-2xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="h-10 w-1 px-0.5 bg-blue-900 opacity-20"></div>
                <div>
                    <h1 class="text-lg font-bold text-slate-900 tracking-tight">å€¾å¬å»ºè¨€ç•™è¨€æ¿</h1>
                    <p class="text-[9px] text-slate-400 font-bold uppercase tracking-[0.2em]">NWNU Student Union Public Portal</p>
                </div>
            </div>
            <div class="text-right hidden sm:block">
                <span class="text-[10px] text-blue-900 bg-blue-50 px-2 py-1 font-bold">è¥¿åŒ—å¸ˆå¤§æ ¡å­¦ç”Ÿä¼š</span>
            </div>
        </div>
    </header>

    <main class="max-w-2xl mx-auto px-6 mt-8">
        
        <section class="mb-10">
            <div class="relative">
                <input type="text" id="searchInput" oninput="handleSearch()" 
                       placeholder="æœç´¢å…¬ç¤ºç»“æœã€å¤„ç†è¿›åº¦ã€å…³é”®è¯..." 
                       class="gov-search w-full rounded-lg py-4 pl-12 pr-4 text-sm outline-none">
                <span class="absolute left-4 top-4.5 text-slate-400">ğŸ”</span>
            </div>
            <div class="mt-3 flex items-center justify-between px-1">
                <div class="flex items-center space-x-2">
                    <span id="status-dot" class="w-2 h-2 rounded-full bg-slate-300"></span>
                    <span id="status-text" class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">System Ready</span>
                </div>
                <div class="text-[10px] text-slate-300 italic">2026 æ•°å­—åŒ–æ ¡å›­å…¬ç¤º</div>
            </div>
        </section>

        <div class="flex items-center space-x-2 mb-6 border-b border-slate-200 pb-2">
            <h2 class="text-xl font-bold text-slate-800">æœ€æ–°å…¬ç¤º</h2>
            <span class="text-slate-300">/</span>
            <span class="text-xs text-slate-400 font-medium">Public Feedback</span>
        </div>

        <div id="card-container" class="space-y-4">
            <div class="p-10 text-center text-slate-400 text-sm italic">
                æ­£åœ¨åŠ è½½å®˜æ–¹å…¬ç¤ºæ•°æ®...
            </div>
        </div>
    </main>

    <footer class="fixed bottom-0 left-0 right-0 p-6 gov-footer z-[100]">
        <div class="max-w-2xl mx-auto">
            <button onclick="window.location.href='https://docs.qq.com/form/page/DWE9pVFphQ0VzeW5h'" 
                    class="w-full bg-[#003d74] hover:bg-[#002d54] text-white py-4 rounded-md font-bold shadow-lg transition-all flex items-center justify-center space-x-3">
                <span class="text-sm tracking-[0.3em]">æˆ‘è¦åæ˜ æƒ…å†µ (è¿›å…¥å»ºè¨€é€šé“)</span>
            </button>
            <p class="text-center text-[9px] text-slate-400 mt-3 font-medium tracking-widest uppercase">
                NWNU Â· Student Union Â· Excellence in Service
            </p>
        </div>
    </footer>

    <script>
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo4ZeX_dZKBzM0Tkq18GOEaqPYO75_AI0OLShfdUSkQ7pRE0DPxWIY6PZ932Nh7DMUYxe49i1oO9CM/pub?output=csv';
        let allItems = [];

        async function init() {
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');

            try {
                const res = await fetch(CSV_URL);
                if (!res.ok) throw new Error();
                const csvData = await res.text();
                
                const rows = csvData.split('\n').slice(1); 
                allItems = rows.map(row => {
                    const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                    return {
                        category: cols[0]?.replace(/"/g, '').trim(),
                        title: cols[1]?.replace(/"/g, '').trim(),
                        content: cols[2]?.replace(/"/g, '').trim(),
                        status: cols[3]?.replace(/"/g, '').trim()
                    };
                }).filter(item => item.title && (item.status === 'å·²ç«‹é¡¹' || item.status === 'å·²å…¬ç¤º' || item.status === 'å¤„ç†ä¸­'));

                statusDot.className = "w-2 h-2 rounded-full bg-green-600 shadow-[0_0_5px_rgba(22,101,52,0.4)]";
                statusText.innerText = "Data Synced Successfully";
                
                render(allItems);
            } catch (err) {
                statusDot.className = "w-2 h-2 rounded-full bg-red-600";
                statusText.innerText = "Sync Failed";
            }
        }

        function handleSearch() {
            const k = document.getElementById('searchInput').value.toLowerCase().trim();
            const filtered = allItems.filter(i => 
                i.title.toLowerCase().includes(k) || 
                i.content.toLowerCase().includes(k) || 
                i.category.toLowerCase().includes(k)
            );
            render(filtered);
        }

        function render(data) {
            const container = document.getElementById('card-container');
            if (data.length === 0) {
                container.innerHTML = `<div class="py-20 text-center text-slate-300 text-sm">æš‚æ— ç¬¦åˆæ¡ä»¶çš„å…¬ç¤ºè®°å½•</div>`;
                return;
            }
            container.innerHTML = data.map(item => `
                <div class="gov-card p-6 shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-[10px] font-bold text-blue-900 border border-blue-900/20 bg-blue-50 px-2 py-0.5">${item.category}</span>
                        <span class="status-badge ${item.status === 'å·²ç«‹é¡¹' ? 'bg-amber-100 text-amber-700' : 'bg-green-100 text-green-700'}">
                            ${item.status}
                        </span>
                    </div>
                    <h3 class="font-bold text-slate-800 text-base mb-2 leading-tight">${item.title}</h3>
                    <p class="text-slate-500 text-[12px] leading-relaxed mb-4">${item.content}</p>
                    <div class="pt-4 border-t border-slate-100 flex justify-between items-center text-[9px] font-bold text-slate-300 tracking-[0.2em] uppercase">
                        <span>è¥¿åŒ—å¸ˆèŒƒå¤§å­¦æ ¡å­¦ç”Ÿä¼š</span>
                        <span>å®˜æ–¹å…¬ç¤ºåº“</span>
                    </div>
                </div>
            `).join('');
        }

        init();
    </script>
</body>
</html>
