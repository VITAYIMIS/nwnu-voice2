<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>è¥¿åŒ—å¸ˆèŒƒå¤§å­¦æ ¡å­¦ç”Ÿä¼š | å€¾å¬å»ºè¨€ç•™è¨€æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --nwnu-blue: #003d74; }
        body { background-color: #f2f4f7; font-family: "PingFang SC", "STHeiti", sans-serif; }
        
        /* é¡¶éƒ¨æ”¿åŠ¡è“è£…é¥° */
        .header-top-border { border-top: 4px solid var(--nwnu-blue); }
        
        /* å¯¼èˆªåˆ‡æ¢ï¼šæ”¿åŠ¡æç®€é£ */
        .tab-item { transition: all 0.3s ease; position: relative; }
        .tab-item.active { color: var(--nwnu-blue); font-weight: 800; }
        .tab-item.active::after {
            content: ''; position: absolute; bottom: -8px; left: 20%; width: 60%;
            height: 3px; background: var(--nwnu-blue); border-radius: 2px;
        }

        /* æœç´¢æ¡†é«˜çº§æ‹Ÿçº¸åŒ– */
        .search-container { box-shadow: 0 2px 15px rgba(0,0,0,0.05); }

        /* æ”¿åŠ¡å¡ç‰‡ï¼šå·¦è¾¹æ¡†åŒºåˆ† */
        .gov-card {
            border-left: 5px solid #d1d5db;
            transition: all 0.2s ease;
        }
        .gov-card:hover { border-left-color: var(--nwnu-blue); background: #f9fafb; }

        /* åº•éƒ¨æ“ä½œåŒº */
        .footer-blur { background: linear-gradient(to top, #f2f4f7 80%, transparent); }
    </style>
</head>
<body class="pb-32">

    <header class="bg-white header-top-border shadow-sm sticky top-0 z-50">
        <div class="max-w-2xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-xl font-bold text-slate-800 tracking-tight">å€¾å¬å»ºè¨€ç•™è¨€æ¿</h1>
                    <p class="text-[9px] text-slate-400 font-bold uppercase tracking-[0.2em]">NWNU Student Union Public Portal</p>
                </div>
                <div class="text-[10px] font-bold text-blue-900 border-l-2 border-blue-900/20 pl-3">å®˜æ–¹Â·æ•°å­—åŒ–å…¬ç¤º</div>
            </div>
        </div>
        
        <div class="bg-white border-t border-slate-100 px-6 py-3 overflow-x-auto">
            <div id="tab-container" class="max-w-2xl mx-auto flex space-x-8 whitespace-nowrap text-sm text-slate-500 font-medium">
                <button onclick="switchTab('å…¨éƒ¨')" class="tab-item active">å…¨éƒ¨</button>
                <button onclick="switchTab('è¡£é£Ÿä½è¡Œ')" class="tab-item">è¡£é£Ÿä½è¡Œ</button>
                <button onclick="switchTab('æ±‚çŸ¥é—®é“')" class="tab-item">æ±‚çŸ¥é—®é“</button>
                <button onclick="switchTab('æ ¡å›­è§’è½')" class="tab-item">æ ¡å›­è§’è½</button>
                <button onclick="switchTab('å­¦ç”Ÿæƒç›Š')" class="tab-item">å­¦ç”Ÿæƒç›Š</button>
                <button onclick="switchTab('ç»¼åˆå»ºè®®')" class="tab-item">ç»¼åˆå»ºè®®</button>
            </div>
        </div>
    </header>

    <main class="max-w-2xl mx-auto px-6 mt-6">
        <div class="search-container relative mb-8">
            <input type="text" id="searchInput" oninput="handleSearch()" 
                   placeholder="æœç´¢æ ‡é¢˜ã€å†…å®¹æˆ–å¤„ç†è¿›åº¦..." 
                   class="w-full bg-white rounded-lg py-4 pl-12 pr-4 text-sm outline-none focus:ring-1 focus:ring-blue-900/10">
            <span class="absolute left-4 top-4 text-slate-400 text-lg">ğŸ”</span>
        </div>

        <div id="card-container" class="space-y-4">
            <div class="h-32 bg-white rounded-lg animate-pulse"></div>
        </div>
    </main>

    <footer class="fixed bottom-0 left-0 right-0 p-6 footer-blur z-50">
        <div class="max-w-2xl mx-auto">
            <button onclick="window.location.href='https://docs.qq.com/form/page/DWE9pVFphQ0VzeW5h'" 
                    class="w-full bg-[#003d74] text-white py-4 rounded font-bold shadow-lg flex items-center justify-center space-x-2 active:scale-[0.98] transition-transform">
                <span class="tracking-[0.3em]">è¿›å…¥å»ºè¨€é€šé“</span>
            </button>
            <p class="text-[8px] text-center text-slate-400 mt-4 font-bold tracking-widest uppercase">Northwest Normal University Student Union</p>
        </div>
    </footer>

    <script>
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo4ZeX_dZKBzM0Tkq18GOEaqPYO75_AI0OLShfdUSkQ7pRE0DPxWIY6PZ932Nh7DMUYxe49i1oO9CM/pub?output=csv';
        let allItems = [];
        let currentTab = 'å…¨éƒ¨';

        async function init() {
            try {
                const res = await fetch(CSV_URL);
                const csvData = await res.text();
                const rows = csvData.split('\n').slice(1); 
                allItems = rows.map(row => {
                    const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                    return {
                        category: cols[0]?.replace(/"/g, '').trim(), // å»ºè¨€åˆ†ç±»
                        title: cols[1]?.replace(/"/g, '').trim(),    // å»ºè¨€æ ‡é¢˜
                        content: cols[2]?.replace(/"/g, '').trim(),  // å†…å®¹
                        status: cols[3]?.replace(/"/g, '').trim()    // è¿›åº¦
                    };
                }).filter(item => item.title && (item.status === 'å·²ç«‹é¡¹' || item.status === 'å·²å…¬ç¤º'));

                render();
            } catch (err) { console.error("æ•°æ®åŠ è½½å¤±è´¥"); }
        }

        // åˆ†ç±»åˆ‡æ¢é€»è¾‘
        function switchTab(tabName) {
            currentTab = tabName;
            // æ›´æ–° UI æ ·å¼
            const tabs = document.querySelectorAll('.tab-item');
            tabs.forEach(t => t.innerText === tabName ? t.classList.add('active') : t.classList.remove('active'));
            render();
        }

        // æœç´¢é€»è¾‘
        function handleSearch() { render(); }

        function render() {
            const container = document.getElementById('card-container');
            const keyword = document.getElementById('searchInput').value.toLowerCase();
            
            const filtered = allItems.filter(item => {
                const matchesTab = currentTab === 'å…¨éƒ¨' || item.category === currentTab;
                const matchesKey = item.title.toLowerCase().includes(keyword) || item.content.toLowerCase().includes(keyword);
                return matchesTab && matchesKey;
            });

            if (filtered.length === 0) {
                container.innerHTML = `<div class="py-20 text-center text-slate-300 text-sm italic tracking-widest leading-loose">æš‚æ— ç›¸å…³å…¬ç¤ºå†…å®¹<br>è¥¿åŒ—å¸ˆå¤§æ ¡å­¦ç”Ÿä¼šç«­è¯šä¸ºæ‚¨æœåŠ¡</div>`;
                return;
            }

            container.innerHTML = filtered.map(item => `
                <div class="gov-card bg-white p-6 shadow-sm">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-[10px] font-bold text-blue-900 bg-blue-50 px-2 py-0.5 border border-blue-900/10">${item.category}</span>
                        <span class="text-[10px] font-bold ${item.status === 'å·²ç«‹é¡¹' ? 'text-amber-600 bg-amber-50' : 'text-green-600 bg-green-50'} px-2 py-0.5 uppercase tracking-wider italic">
                            â— ${item.status}
                        </span>
                    </div>
                    <h3 class="font-bold text-slate-800 text-base mb-2 leading-tight">${item.title}</h3>
                    <p class="text-slate-500 text-[12px] leading-relaxed mb-6">${item.content}</p>
                    <div class="pt-4 border-t border-slate-50 flex justify-between items-center text-[8px] text-slate-300 font-bold uppercase tracking-[0.2em]">
                        <span>å®˜æ–¹æ¡£æ¡ˆåº“ OFFICIAL ARCHIVE</span>
                        <span class="italic font-black">NWNU SU</span>
                    </div>
                </div>
            `).join('');
        }

        init();
    </script>
</body>
</html>
